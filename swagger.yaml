swagger: "2.0"
info:
  version: "0.0.1"
  title: Be
  description: |
    The API provides CSR backend API.

basePath: /api/
schemes:
  - https
  - http
securityDefinitions:
  Bearer:
    type: apiKey
    name: Authorization
    in: header
consumes:
  - application/json
produces:
  - application/json

paths:
  /health:
    get:
      summary: Healthcheck endpoint
      tags:
        - System
      operationId: GetHealth
      responses:
        200:
          description: Success
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/login:
    post:
      description: 'Returns token for authorized User'
      tags:
        - Users
      operationId: Login
      consumes:
        - "application/json"
      parameters:
        - name: 'login'
          in: 'body'
          required: true
          description: 'Login Payload'
          schema:
            $ref: '#/definitions/LoginInfo'
      responses:
        200:
          description: Successful login
          schema:
            $ref: '#/definitions/TokenPair'
        401:
          schema:
            type: string
          description: Unauthorized
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/logout:
    post:
      description: 'Logout user'
      tags:
        - Users
      operationId: Logout
      consumes:
        - "application/json"
      parameters:
        - name: 'Refresh token'
          in: 'body'
          required: true
          description: 'Refresh payload'
          schema:
            $ref: '#/definitions/RefreshToken'
      responses:
        200:
          description: Successful logout
          schema:
            type: string
        404:
          description: Refresh token not found.
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/refresh:
    post:
      description: 'Returns new token pair for an authorized User'
      tags:
        - Users
      operationId: Refresh
      consumes:
        - "application/json"
      parameters:
        - name: 'Refresh token'
          in: 'body'
          required: true
          description: 'Refresh payload'
          schema:
            $ref: '#/definitions/RefreshToken'

      responses:
        200:
          description: Successful refresh.
          schema:
            $ref: '#/definitions/TokenPair'
        404:
          description: Refresh token not found.
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/users:
    get:
      parameters:
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 0
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - name
            - surname
            - login
            - email
            - is_readonly
          default: id
      summary: Get all users
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: GetAllUsers
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/GetListUsers"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    post:
      summary: Register a new user.
      tags:
        - Users
      operationId: postUser
      parameters:
        - name: data
          in: body
          description: New user data.
          required: true
          schema:
            $ref: "#/definitions/UserRegister"
      responses:
        201:
          description: Created
          schema:
            $ref: "#/definitions/CreateUserResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/users/me:
    get:
      summary: Get the current user data.
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: getCurrentUser
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/UserInfo"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    patch:
      summary: Edit selected fields of the current user.
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: patchUser
      consumes:
        - application/json
      parameters:
        - name: userPatch
          in: body
          description: The patch to apply to the user.
          required: true
          schema:
            $ref: "#/definitions/PatchUserRequest"
      responses:
        204:
          description: Success
        default:
          description: Unexpected error
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete the current user.
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: deleteCurrentUser
      responses:
        200:
          description: Success
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/users/me/password:
    patch:
      summary: Change the current user password.
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: changePassword
      consumes:
        - application/json
      parameters:
        - name: passwordPatch
          in: body
          description: The patch to apply to the user password.
          required: true
          schema:
            $ref: "#/definitions/PatchPasswordRequest"
      responses:
        204:
          description: Success
        401:
          description: Unauthorized
          schema:
            $ref: "#/definitions/SwaggerError"
        403:
          description: Wrong old password
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/users/me/email:
    patch:
      summary: Change the current email.
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: changeEmail
      consumes:
        - application/json
      parameters:
        - name: emailPatch
          in: body
          description: The patch to apply to the user email.
          required: true
          schema:
            $ref: "#/definitions/PatchEmailRequest"
      responses:
        204:
          description: Success
        401:
          description: Unauthorized
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/email_confirm/{token}:
    get:
      summary: Verify email confirmation token.
      tags:
        - Email_Confirm
      operationId: VerifyEmailConfirmToken
      parameters:
        - name: token
          in: path
          required: true
          type: string
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/EmailConfirmResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /management/users/{userId}:
    parameters:
      - name: userId
        in: path
        required: true
        description: user id
        type: integer
    get:
      summary: Get user by ID
      security:
        - Bearer: [ ]
      tags:
        - Users
      operationId: GetUser
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/UserInfo"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/roles:
    get:
      summary: List all roles.
      security:
        - Bearer: [ ]
      tags:
        - Roles
      operationId: GetRoles
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListRoles"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/management/users/{userId}/role:
    parameters:
      - name: userId
        in: path
        required: true
        description: user id
        type: integer
    post:
      security:
        - Bearer: [ ]
      consumes:
        - application/json
      parameters:
        - name: data
          in: body
          description: Role to assign to user.
          required: true
          schema:
            $ref: "#/definitions/AssignRoleToUser"
      summary: Assign role to user
      tags:
        - Users
      operationId: AssignRoleToUser
      responses:
        200:
          description: Role has been assigned to user
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /v1/users/{userId}:
    parameters:
      - name: userId
        in: path
        required: true
        description: user id
        type: integer
    post:
      consumes:
        - application/json
      parameters:
        - name: UpdateUserTask
          in: body
          description: Data to update.
          required: true
          schema:
            $ref: "#/definitions/UpdateUserTask"
      tags:
        - Users
      operationId: UserUpdate
      summary: Updates user information by its id.
      security:
        - Bearer: [ ]
      responses:
        200:
          description: User information has been updated.
          schema:
            $ref: "#/definitions/SuccessUserUpdateResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      consumes:
        - application/json
      tags:
        - Users
      operationId: deleteUser
      summary: Delete user by ID
      security:
        - Bearer: [ ]
      responses:
        204:
          description: Success
        404:
          description: User not found
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /v1/users/{userId}/readonly-access:
    put:
      summary: Update user's read-only access status
      parameters:
        - name: userId
          in: path
          description: ID of the user to update
          required: true
          type: integer
        - name: body
          in: body
          description: Request body containing the new read-only access status
          required: true
          schema:
            type: object
            properties:
              is_readonly:
                type: boolean
                description: New read-only access status for the user
      tags:
        - Users
      security:
        - Bearer: [ ]
      operationId: UpdateReadonlyAccess
      responses:
        204:
          description: Success
        400:
          description: Bad request
          schema:
            $ref: "#/definitions/SwaggerError"
        401:
          description: Unauthorized
          schema:
            $ref: "#/definitions/SwaggerError"
        403:
          description: Forbidden
          schema:
            $ref: "#/definitions/SwaggerError"
        404:
          description: User not found
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /equipmentstatus/repaired/{equipmentstatusId}:
    parameters:
      - name: equipmentstatusId
        in: path
        required: true
        description: equipment status id
        type: integer
    delete:
      summary: Change equipment status on available by id.
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatus
      operationId: UpdateEquipmentStatusOnAvailable
      parameters:
        - name: name
          in: body
          description: "Change equipment status on available"
          required: true
          schema:
            $ref: "#/definitions/EquipmentStatusRemoveFromRepairRequest"
      responses:
        200:
          description: Equipment status updated on available
          schema:
            $ref: "#/definitions/EquipmentStatusRepairResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    put:
      summary: Change equipment status on unavailable with start/end dates by id.
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatus
      operationId: UpdateEquipmentStatusOnUnavailable
      parameters:
        - name: name
          in: body
          description: "Update equipment status on unavailable"
          required: true
          schema:
            $ref: "#/definitions/EquipmentStatusInRepairRequest"
      responses:
        200:
          description: Equipment status updated on unavailable
          schema:
            $ref: "#/definitions/EquipmentStatusRepairResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    get:
      summary: Check that equipment status has orders on provided dates.
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatus
      operationId: CheckEquipmentStatus
      parameters:
        - name: name
          in: body
          description: "Check equipment status"
          required: true
          schema:
            $ref: "#/definitions/EquipmentStatusInRepairRequest"
      responses:
        200:
          description: Equipment checked
          schema:
            $ref: "#/definitions/EquipmentStatusRepairConfirmationResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    patch:
      summary: Change repaired equipment status dates by id.
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatus
      operationId: UpdateRepairedEquipmentStatusDates
      parameters:
        - name: name
          in: body
          description: "Update repaired equipment status start/end dates"
          required: true
          schema:
            $ref: "#/definitions/EquipmentStatusEditDatesRequest"
      responses:
        200:
          description: Repaired equipment status dates updated
          schema:
            $ref: "#/definitions/EquipmentStatusRepairResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/status_names:
    post:
      summary: Creating a new equipment status.
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatusName
      operationId: postEquipmentStatusName
      parameters:
        - name: name
          in: body
          description: Status Name for equipment
          required: true
          schema:
            $ref: "#/definitions/NewEquipmentStatusName"
      responses:
        201:
          description: Status name for equipment has been created
          schema:
            $ref: "#/definitions/SuccessEquipmentStatusNameOperationResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    get:
      summary: List all statuses.
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatusName
      operationId: ListEquipmentStatusNames
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListEquipmentStatusNames"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/statuses/{statusId}:
    parameters:
      - name: statusId
        in: path
        required: true
        description: status id
        type: integer
    get:
      summary: Get status by id
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatusName
      operationId: GetEquipmentStatusName
      responses:
        200:
          description: Equipment Status Name found
          schema:
            $ref: "#/definitions/SuccessEquipmentStatusNameOperationResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete status by id
      security:
        - Bearer: [ ]
      tags:
        - EquipmentStatusName
      operationId: DeleteEquipmentStatusName
      responses:
        200:
          description: Equipment Status Name has been created
          schema:
            $ref: "#/definitions/SuccessEquipmentStatusNameOperationResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/categories:
    get:
      parameters:
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - name
          default: id
        - name: has_equipments
          in: query
          required: false
          description: if true, only categories related to equipments are returned
          type: boolean
          default: false
      summary: Get all categories.
      security:
        - Bearer: [ ]
      tags:
        - Categories
      operationId: GetAllCategories
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListOfCategories"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    post:
      summary: Create a new Category.
      security:
        - Bearer: [ ]
      tags:
        - Categories
      operationId: CreateNewCategory
      parameters:
        - name: NewCategory
          in: body
          description: Name of a category
          required: true
          schema:
            $ref: "#/definitions/CreateNewCategory"
      responses:
        201:
          description: Success
          schema:
            $ref: "#/definitions/CreateNewCategoryResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/unavailability_periods/{equipmentId}:
    parameters:
      - name: equipmentId
        in: path
        required: true
        description: equipment id
        type: integer
    get:
      summary: Get information about the unavailability periods of equipment by id.
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: GetUnavailabilityPeriodsByEquipmentID
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/EquipmentUnavailabilityPeriodsResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
        404:
          schema:
            type: string
          description: Not Found
  /equipment/categories/{categoryId}:
    parameters:
      - name: categoryId
        in: path
        required: true
        description: category id
        type: integer
    get:
      summary: Get information about the category of equipment by id.
      security:
        - Bearer: [ ]
      tags:
        - Categories
      operationId: getCategoryByID
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/GetCategoryByIDResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete category of equipment from db by id.
      security:
        - Bearer: [ ]
      tags:
        - Categories
      operationId: deleteCategory
      responses:
        200:
          description: category of equipment successfully deleted from db
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    put:
      summary: Edit equipment category by id.
      security:
        - Bearer: [ ]
      tags:
        - Categories
      operationId: UpdateCategory
      parameters:
        - name: updateCategory
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateCategoryRequest'
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/UpdateCategoryResponse"
        default:
          description: Unexpected error
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/categories/{categoryId}/subcategories:
    parameters:
      - name: categoryId
        in: path
        required: true
        description: category id
        type: integer
    get:
      summary: List subcategories of equipment categories by category ID.
      security:
        - Bearer: [ ]
      tags:
        - Subcategories
      operationId: ListSubcategoriesByCategoryID
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListOfSubcategories"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    post:
      summary: Create a new Subcategory.
      security:
        - Bearer: [ ]
      tags:
        - Subcategories
      operationId: CreateNewSubcategory
      parameters:
        - name: NewSubcategory
          in: body
          description: Name of subcategory
          required: true
          schema:
            $ref: "#/definitions/NewSubcategory"
      responses:
        201:
          description: Success
          schema:
            $ref: "#/definitions/SubcategoryResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/categories/subcategories/{subcategoryId}:
    parameters:
      - name: subcategoryId
        in: path
        required: true
        description: subcategory id
        type: integer
    get:
      summary: Get information about the subcategory of equipment by id.
      security:
        - Bearer: [ ]
      tags:
        - Subcategories
      operationId: GetSubcategoryByID
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/SubcategoryResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete subcategory of equipment from db by id.
      security:
          - Bearer: [ ]
      tags:
        - Subcategories
      operationId: DeleteSubcategory
      responses:
        200:
          description: subcategory of equipment successfully deleted from db
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    put:
      summary: Edit equipment subcategory by id.
      security:
        - Bearer: [ ]
      tags:
        - Subcategories
      operationId: UpdateSubcategory
      parameters:
        - name: UpdateSubcategory
          in: body
          required: true
          schema:
            $ref: '#/definitions/NewSubcategory'
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/SubcategoryResponse"
        default:
          description: Unexpected error
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/photos:
    post:
      summary: Upload a new equipment photo
      security:
        - Bearer: [ ]
      tags:
        - Photos
      operationId: CreateNewPhoto
      consumes:
        - multipart/form-data
      parameters:
        - name: file
          in: formData
          type: file
          description: Upload a new equipment photo
          required: true
      responses:
        201:
          description: Equipment photo uploaded
          schema:
            $ref: "#/definitions/CreateNewPhotoResponse"
        400:
          description: Bad request
          schema:
            $ref: "#/definitions/SwaggerError"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/photos/{photoId}:
    parameters:
      - name: photoId
        in: path
        required: true
        description: photo id
        type: string
    get:
      summary: Get photo by id
      security:
        - Bearer: [ ]
      tags:
        - Photos
      operationId: GetPhoto
      produces:
        - image/jpg
        - application/json
      responses:
        200:
          description: Photo has been found
          schema:
            type: file
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete photo by id
      security:
        - Bearer: [ ]
      tags:
        - Photos
      operationId: DeletePhoto
      responses:
        200:
          description: Equipment photo has been deleted
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/photos/{photoId}/download:
    parameters:
      - name: photoId
        in: path
        required: true
        description: photo id
        type: string
    get:
      summary: Download photo by id
      security:
        - Bearer: [ ]
      tags:
        - Photos
      operationId: DownloadPhoto
      produces:
        - application/octet-stream
        - application/json
      responses:
        200:
          description: Photo has been found
          schema:
            type: file
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/orders:
    get:
      tags:
        - Orders
      operationId: GetUserOrders
      parameters:
        - name: status
          in: query
          required: false
          description: filter orders by status (in review, approved, closed, etc) or aggregated status (all, active or finished)
          type: string
          enum:
            - all
            - active
            - finished
            - in review
            - approved
            - in progress
            - rejected
            - closed
            - prepared
            - overdue
            - blocked
          default: all
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - rent_start
          default: id
      security:
        - Bearer: [ ]
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/UserOrdersList"
        default:
          description: 'Unexpected error'
          schema:
            $ref: '#/definitions/SwaggerError'
    post:
      tags:
        - Orders
      operationId: CreateOrder
      security:
        - Bearer: [ ]
      consumes:
        - application/json
      responses:
        201:
          description: 'Order created'
          schema:
            $ref: '#/definitions/UserOrder'
        default:
          description: 'Unexpected error'
          schema:
            $ref: '#/definitions/SwaggerError'
      parameters:
        - name: data
          in: body
          description: 'Create new order'
          required: true
          schema:
            $ref: '#/definitions/OrderCreateRequest'
  /v1/orders/{orderId}:
    put:
      summary: Edit order by id
      security:
        - Bearer: [ ]
      tags:
        - Orders
      operationId: UpdateOrder
      parameters:
        - name: orderId
          in: path
          required: true
          description: order id
          type: integer
        - name: data
          in: body
          description: Edit order
          required: true
          schema:
            $ref: "#/definitions/OrderUpdateRequest"
      responses:
        200:
          description: Order updated
          schema:
            $ref: "#/definitions/UserOrder"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/order_statuses/{orderId}:
    get:
      summary: Get full order status history.
      tags:
        - Orders
      security:
        - Bearer: [ ]
      parameters:
        - name: orderId
          in: path
          required: true
          description: order id
          type: integer
      operationId: GetFullOrderHistory
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/OrderStatuses"
        404:
          description: Order not found
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /v1/order_statuses/:
    post:
      summary: Add new order status to order status history.
      tags:
        - Orders
      security:
        - Bearer: [ ]
      parameters:
        - name: data
          in: body
          description: 'Create new order status'
          required: true
          schema:
            $ref: '#/definitions/NewOrderStatus'
      operationId: AddNewOrderStatus
      responses:
        200:
          description: Order created
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: '#/definitions/SwaggerError'
  /v1/orders/status/{status}:
    get:
      summary: Get orders by status.
      tags:
        - Orders
      security:
        - Bearer: [ ]
      parameters:
        - name: status
          in: path
          required: true
          description: order status
          type: string
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - created_at
            - rent_start
            - rent_end
            - is_first
          default: id
      operationId: GetOrdersByStatus
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/UserOrdersList"
        404:
          description: No orders found
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: '#/definitions/SwaggerError'
  /v1/orders/from={fromDate}&to={toDate}&status={statusName}:
    get:
      summary: Get orders by date and status.
      tags:
        - Orders
      security:
        - Bearer: [ ]
      parameters:
        - name: fromDate
          in: path
          required: true
          type: string
          format: date
        - name: toDate
          in: path
          required: true
          type: string
          format: date
        - name: statusName
          in: path
          required: true
          type: string
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - created_at
            - rent_start
            - rent_end
            - is_first
          default: id
      operationId: GetOrdersByDateAndStatus
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/UserOrdersList"
        404:
          description: No orders found
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: '#/definitions/SwaggerError'
  /v1/status_names:
    get:
      summary: Get all status names.
      tags:
        - Orders
      security:
        - Bearer: [ ]
      operationId: GetAllStatusNames
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/OrderStatusNames"
        default:
          description: Unexpected error.
          schema:
            $ref: '#/definitions/SwaggerError'
  /v1/active_areas:
    get:
      parameters:
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - name
          default: id
      summary: Get all active areas.
      security:
        - Bearer: [ ]
      tags:
        - Active_Areas
      operationId: GetAllActiveAreas
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListOfActiveAreas"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment:
    post:
      summary: Register a new equipment
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: CreateNewEquipment
      consumes:
        - application/json
      parameters:
        - name: newEquipment
          in: body
          description: Create a new equipment
          required: true
          schema:
            $ref: "#/definitions/Equipment"
      responses:
        201:
          description: Equipment created
          schema:
            $ref: "#/definitions/EquipmentResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    get:
      summary: Get all equipment
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: GetAllEquipment
      parameters:
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - name
            - title
          default: id
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListEquipment"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/{equipmentId}:
    parameters:
      - name: equipmentId
        in: path
        required: true
        description: equipment id
        type: integer
    get:
      summary: Get equipment by id
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: GetEquipment
      responses:
        200:
          description: Equipment has been found
          schema:
            $ref: "#/definitions/EquipmentResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete equipment by id
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: DeleteEquipment
      responses:
        200:
          description: Equipment has been deleted
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    put:
      summary: Edit equipment by id
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: EditEquipment
      parameters:
        - name: EditEquipment
          in: body
          description: Edit an equipment
          required: false
          schema:
            $ref: "#/definitions/Equipment"
      responses:
        200:
          description: Equipment edited
          schema:
            $ref: "#/definitions/EquipmentResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /equipment/achive/{equipmentId}/:
    parameters:
      - name: equipmentId
        in: path
        required: true
        description: equipment id
        type: integer
    post:
        summary: Archive equipment by id
        security:
            - Bearer: [ ]
        tags:
            - Equipment
        operationId: ArchiveEquipment
        responses:
          204:
            description: Equipment has been archived
          404:
            description: Equipment not found
            schema:
              $ref: "#/definitions/SwaggerError"
          default:
            description: Unexpected error.
            schema:
                $ref: "#/definitions/SwaggerError"
  /equipment/{equipmentId}/blocking:
    parameters:
      - name: equipmentId
        in: path
        required: true
        description: equipment id
        type: integer
    post:
        summary: Block equipment by id
        security:
            - Bearer: [ ]
        parameters:
        - name: data
          in: body
          description: Periods of blocking.
          required: true
          schema:
            $ref: "#/definitions/ChangeEquipmentStatusToBlockedRequest"
        tags:
            - Equipment
        operationId: BlockEquipment
        responses:
          204:
            description: Equipment has been blocked
          404:
            description: Equipment not found
            schema:
              $ref: "#/definitions/SwaggerError"
          default:
            description: Unexpected error.
            schema:
                $ref: "#/definitions/SwaggerError"
  /equipment/{equipmentId}/unblocking:
    parameters:
      - name: equipmentId
        in: path
        required: true
        description: equipment id
        type: integer
    post:
        summary: Unblock equipment by id
        security:
            - Bearer: [ ]
        tags:
            - Equipment
        operationId: UnblockEquipment
        responses:
          204:
            description: Equipment has been unblocked
          404:
            description: Equipment not found
            schema:
              $ref: "#/definitions/SwaggerError"
          default:
            description: Unexpected error.
            schema:
                $ref: "#/definitions/SwaggerError"
  /equipment/search:
    post:
      summary: Equipment filtered list
      security:
        - Bearer: [ ]
      tags:
        - Equipment
      operationId: FindEquipment
      parameters:
        - name: FindEquipment
          in: body
          description: Filtered list of an equipment
          required: false
          schema:
            $ref: "#/definitions/EquipmentFilter"
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
          - asc
          - desc
          default: asc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
          - id
          - name
          - title
          default: id
      responses:
        200:
          description: Equipment has been found
          schema:
            $ref: "#/definitions/ListEquipment"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /pet_size:
    post:
      summary: Register a new pet size
      security:
        - Bearer: [ ]
      tags:
        - PetSize
      operationId: CreateNewPetSize
      consumes:
        - application/json
      parameters:
        - name: newPetSize
          in: body
          description: Create a new pet size
          required: true
          schema:
            $ref: "#/definitions/PetSize"
      responses:
        201:
          description: Pet kind created
          schema:
            $ref: "#/definitions/PetSizeResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    get:
      summary: Get all pet size
      security:
        - Bearer: [ ]
      tags:
        - PetSize
      operationId: GetAllPetSize
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListOfPetSizes"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /pet_size/{petSizeId}:
    parameters:
      - name: petSizeId
        in: path
        required: true
        description: pet size id
        type: integer
    get:
      summary: Get pet size by id
      security:
        - Bearer: [ ]
      tags:
        - PetSize
      operationId: GetPetSize
      responses:
        200:
          description: Pet size has been found
          schema:
            $ref: "#/definitions/PetSizeResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete pet size by id
      security:
        - Bearer: [ ]
      tags:
        - PetSize
      operationId: DeletePetSize
      responses:
        200:
          description: Pet size has been deleted
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    put:
      summary: Edit pet size by id
      security:
        - Bearer: [ ]
      tags:
        - PetSize
      operationId: EditPetSize
      parameters:
        - name: EditPetSize
          in: body
          description: Edit an pet size
          required: true
          schema:
            $ref: "#/definitions/PetSize"
      responses:
        200:
          description: Pet size edited
          schema:
            $ref: "#/definitions/PetSizeResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /password_reset/:
    post:
      summary: Create password reset link by login.
      tags:
        - Password_Reset
      operationId: SendLinkByLogin
      parameters:
        - name: login
          in: body
          required: true
          schema:
            $ref: "#/definitions/SendPasswordResetLinkRequest"
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/PasswordResetResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /password_reset/{token}:
    get:
      summary: Get password reset link.
      tags:
        - Password_Reset
      operationId: GetPasswordResetLink
      parameters:
        - name: token
          in: path
          required: true
          type: string
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/PasswordResetResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /pet_kind:
    get:
      summary: Get all pet kinds
      security:
        - Bearer: [ ]
      tags:
        - PetKind
      operationId: GetAllPetKinds
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/ListOfPetKinds"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    post:
      summary: Register a new pet kind
      security:
        - Bearer: [ ]
      tags:
        - PetKind
      operationId: CreateNewPetKind
      consumes:
        - application/json
      parameters:
        - name: newPetKind
          in: body
          description: Create a new pet kind
          required: true
          schema:
            $ref: "#/definitions/PetKind"
      responses:
        201:
          description: Pet size created
          schema:
            $ref: "#/definitions/PetKindResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /pet_kind/{petKindId}:
    parameters:
      - name: petKindId
        in: path
        required: true
        description: pet kind id
        type: integer
    get:
      summary: Get pet kind by id
      security:
        - Bearer: [ ]
      tags:
        - PetKind
      operationId: GetPetKind
      responses:
        200:
          description: Pet kind has been found
          schema:
            $ref: "#/definitions/PetKindResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    delete:
      summary: Delete pet kind by id
      security:
        - Bearer: [ ]
      tags:
        - PetKind
      operationId: DeletePetKind
      responses:
        200:
          description: Pet kind has been deleted
          schema:
            type: string
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
    put:
      summary: Edit pet kind by id
      security:
        - Bearer: [ ]
      tags:
        - PetKind
      operationId: EditPetKind
      parameters:
        - name: EditPetKind
          in: body
          description: Edit an pet kind
          required: true
          schema:
            $ref: "#/definitions/PetKind"
      responses:
        200:
          description: Pet kind edited
          schema:
            $ref: "#/definitions/PetKindResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /registration_confirm/:
    post:
      summary: Create registration confirm link by login.
      tags:
        - Registration_Confirm
      operationId: SendRegistrationConfirmLinkByLogin
      parameters:
        - name: login
          in: body
          required: true
          schema:
            $ref: "#/definitions/SendRegistrationConfirmLinkRequest"
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/RegistrationConfirmResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

  /registration_confirm/{token}:
    get:
      summary: Verify registration confirmation token.
      tags:
        - Registration_Confirm
      operationId: VerifyRegistrationConfirmToken
      parameters:
        - name: token
          in: path
          required: true
          type: string
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/RegistrationConfirmResponse"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"
  /management/orders:
    get:
      summary: Get all orders
      security:
        - Bearer: [ ]
      tags:
        - Orders
      operationId: GetAllOrders
      parameters:
        - name: status
          in: query
          required: false
          description: filter orders by status (in review, approved, closed, etc) or aggregated status (all, active or finished)
          type: string
          enum:
            - all
            - active
            - finished
            - in review
            - approved
            - in progress
            - rejected
            - closed
            - prepared
            - overdue
            - blocked
          default: all
        - name: equipment_id
          in: query
          required: false
          description: filter orders by Equipment's ID
          type: integer
        - name: limit
          in: query
          required: false
          description: limit of items in page
          type: integer
          default: 10
        - name: offset
          in: query
          required: false
          description: offset of items
          type: integer
          default: 0
        - name: order_by
          in: query
          required: false
          description: how to order list
          type: string
          enum:
            - asc
            - desc
          default: desc
        - name: order_column
          in: query
          required: false
          description: column to order by
          type: string
          enum:
            - id
            - name
            - title
          default: id
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/OrdersList"
        default:
          description: Unexpected error.
          schema:
            $ref: "#/definitions/SwaggerError"

definitions:
  principal:
    type: object
    properties:
      ID:
        type: integer
      role:
        type: string
      is_registration_confirmed:
        type: boolean
      is_personal_data_confirmed:
        type: boolean
      is_readonly:
        type: boolean
  SwaggerError: # Do not delete it. It is used for generating error responses.
    type: object
    required:
      - code
      - message
    properties:
        code:
            type: integer
            format: int32
        message:
            type: string
        details:
            type: string
  PetKind:
    type: object
    required:
      - name
    properties:
      name:
        type: string

  ListOfPetKinds:
    type: array
    items:
      $ref: "#/definitions/PetKindResponse"
  PetKindResponse:
    type: object
    required:
      - id
      - name
    properties:
      id:
        type: integer
      name:
        type: string

  UpdateUserTask:
    type: object
    required:
      - data
    description: Update user object
    properties:
      data:
        type: object
        properties:
          name:
            type: string
            description: Name of user.
          surname:
            type: string
            description: Surname of user.
          patronymic:
            type: string
            description: Patronymic data.
          passport_series:
            type: string
          passport_number:
            type: string
          passport_authority:
            type: string
          passport_issue_date:
            type: string
          phone_number:
            type: string
            description: Phone number.
          email:
            type: string
          type:
            type: string
          active_areas:
            type: array
            items:
              type: integer
          org_name:
            type: string
          vk:
            type: string

  PatchUserRequest:
    type: object
    properties:
      name:
        type: string
      surname:
        type: string
      passport_series:
        type: string
      passport_number:
        type: string
      passport_authority:
        type: string
      passport_issue_date:
        type: string
        format: date
      phone_number:
        type: string
      org_name:
        type: string
      website:
        type: string
      vk:
        type: string
  PatchPasswordRequest:
    type: object
    properties:
        old_password:
            type: string
        new_password:
            type: string
  PatchEmailRequest:
    type: object
    properties:
        new_email:
            type: string
      # User
  LoginInfo:
    type: object
    required:
      - login
      - password
    properties:
      login:
        type: string
      password:
        type: string
  AccessToken:
    type: object
    required:
      - accessToken
    properties:
      accessToken:
        type: string
  RefreshToken:
    type: object
    required:
      - refreshToken
    properties:
      refreshToken:
        type: string
  TokenPair:
    type: object
    required:
      - accessToken
      - refreshToken
    properties:
      accessToken:
        type: string
      refreshToken:
        type: string
  UserEmbeddable:
    type: object
    required:
      - id
      - name
    properties:
      id:
        type: integer
      name:
        type: string
  User:
    type: object
    required:
      - id
      - createTime
      - roleId
      - login
    properties:
      id:
        type: integer
      login:
        type: string
      createTime:
        type: string
        format: date-time
      roleId:
        type: integer
      name:
        type: string
        description: Name of user.
      surname:
        type: string
        description: Surname of user.
      patronymic:
        type: string
        description: Patronymic data.
      passport_series:
        type: string
      passport_number:
        type: string
      passport_authority:
        type: string
      passport_issue_date:
        type: string
      phone_number:
        type: string
        description: Phone number.
      email:
        type: string
      type:
        type: string
      active_areas:
        type: array
        items:
          type: integer
      org_name:
        type: string

  UserRegister:
    type: object
    required:
      - login
      - password
      - type
    properties:
      login:
        type: string
        minLength: 3
      password:
        type: string
        minLength: 6
      email:
        type: string
        format: email
      type:
        type: string
        enum:
          - person
          - organization
      name:
        type: string
      surname:
        type: string
      patronymic:
        type: string
      passport_series:
        type: string
      passport_number:
        type: string
      passport_authority:
        type: string
      passport_issue_date:
        type: string
        format: date
      phone_number:
        type: string
      org_name:
        type: string
      website:
        type: string
      vk:
        type: string
      active_areas:
        type: array
        items:
          type: integer
  CreateUserResponse:
    type: object
    required:
      - data
    properties:
      data:
        type: object
        required:
          - id
          - login
        properties:
          id:
            type: integer
          login:
            type: string
  GetUserResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/User"
  AssignRoleToUser:
    type: object
    required:
      - roleId
    properties:
      roleId:
        type: integer
  UserInfo:
    type: object
    required:
      - id
      - login
      - role
      - surname
      - name
      - patronymic
      - passport_series
      - passport_number
      - passport_authority
      - passport_issue_date
      - phone_number
      - email
      - is_readonly
      - type
      - org_name
      - is_registration_confirmed
    properties:
      id:
        type: integer
      login:
        type: string
      role:
        type: object
        properties:
          id:
            type: integer
          name:
            type: string
      surname:
        type: string
      name:
        type: string
      patronymic:
        type: string
      passport_series:
        type: string
      passport_number:
        type: string
      passport_authority:
        type: string
      passport_issue_date:
        type: string
      phone_number:
        type: string
      email:
        type: string
      is_readonly:
        type: boolean
        example: false
      type:
        type: string
      org_name:
        type: string
      is_registration_confirmed:
        type: boolean
        example: false

  GetListUsers:
    type: object
    required:
      - total
      - items
    properties:
      total:
        type: integer
      items:
        type: array
        items:
          $ref: "#/definitions/UserInfo"

  SuccessUserUpdateResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/User"
  #Role
  Role:
    type: object
    required:
      - id
      - name
      - slug
    properties:
      id:
        type: integer
      name:
        type: string
      slug:
        type: string
  ListRoles:
    type: array
    items:
      $ref: "#/definitions/Role"

  #EquipmentStatusName
  EquipmentStatusName:
    type: object
    required:
      - name
    properties:
      id:
        type: integer
      name:
        type: string
  NewEquipmentStatusName:
    type: object
    required:
      - name
    properties:
      name:
        type: string
  ListEquipmentStatusNames:
    type: array
    items:
      $ref: "#/definitions/EquipmentStatusName"
  SuccessEquipmentStatusNameOperationResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/EquipmentStatusName"
  StatusName:
    type: object
    required:
      - name
    properties:
      name:
        type: string
  #EquipmentStatusEditDatesRequest
  EquipmentStatusEditDatesRequest:
    type: object
    properties:
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
  #EquipmentStatusInRepairRequest
  EquipmentStatusInRepairRequest:
    type: object
    required:
      - status_name
      - start_date
      - end_date
    properties:
      status_name:
        type: string
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
  #EquipmentStatusRemoveFromRepairRequest
  EquipmentStatusRemoveFromRepairRequest:
    type: object
    required:
      - status_name
    properties:
      status_name:
        type: string
  #EquipmentStatusRepairResponse
  EquipmentStatusRepairResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/EquipmentStatus"
  #ChangeEquipmentStatusToBlockedRequest
  ChangeEquipmentStatusToBlockedRequest:
    type: object
    properties:
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
  #EquipmentStatusRepairConfirmationResponse
  EquipmentStatusRepairConfirmationResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/EquipmentStatusRepairConfirmation"
  #EquipmentUnavailabilityPeriodsResponse
  EquipmentUnavailabilityPeriodsResponse:
    type: object
    required:
      - items
    properties:
      items:
        type: array
        items:
          $ref: "#/definitions/EquipmentUnavailabilityPeriods"
  #EquipmentStatusRepairConfirmation
  EquipmentStatusRepairConfirmation:
    type: object
    required:
      - equipment_status_id
      - equipment_id
      - status_name
      - start_date
      - end_date
      - user_email
      - order_id
    properties:
      equipment_status_id:
        type: integer
      equipment_id:
        type: integer
      status_name:
        type: string
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
      user_email:
        type: string
      order_id:
        type: integer
  #EquipmentUnavailabilityPeriods
  EquipmentUnavailabilityPeriods:
    type: object
    required:
      - start_date
      - end_date
    properties:
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
  #EquipmentStatus
  EquipmentStatus:
    type: object
    required:
      - id
      - equipment_id
      - status_name
      - start_date
      - end_date
    properties:
      id:
        type: integer
      equipment_id:
        type: integer
      status_name:
        type: string
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
      comment:
        type: string
      created_at:
        type: string
        format: date-time
  NewEquipmentStatus:
    type: object
    required:
      - equipment_id
      - status_name
      - start_date
      - end_date
    properties:
      equipment_id:
        type: integer
      status_name:
        type: string
      start_date:
        type: string
        format: date-time
      end_date:
        type: string
        format: date-time
      comment:
        type: string
      order_id:
        type: integer
  # Photo
  Photo:
    type: object
    required:
      - id
    properties:
      id:
        type: string
      fileName:
        type: string
  CreateNewPhoto:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Photo"
  CreateNewPhotoResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Photo"
  # Category
  Category:
    type: object
    required:
      - id
      - name
      - max_reservation_time
      - max_reservation_units
      - has_subcategory
    properties:
      id:
        type: integer
      name:
        type: string
      max_reservation_time:
        type: integer
      max_reservation_units:
        type: integer
      has_subcategory:
        type: boolean
  ListOfCategories:
    type: object
    required:
      - total
      - items
    properties:
      total:
        type: integer
      items:
        type: array
        items:
          $ref: "#/definitions/Category"
  GetCategoryByIDResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Category"
  DeleteCategoryResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Category"
  CreateNewCategory:
    type: object
    required:
      - name
      - max_reservation_time
      - max_reservation_units
      - has_subcategory
    properties:
      name:
        type: string
      max_reservation_time:
        type: integer
      max_reservation_units:
        type: integer
      has_subcategory:
        type: boolean
  CreateNewCategoryResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Category"
  UpdateCategoryRequest:
    type: object
    required:
      - name
      - max_reservation_time
      - max_reservation_units
      - has_subcategory
    properties:
      name:
        type: string
      max_reservation_time:
        type: integer
      max_reservation_units:
        type: integer
      has_subcategory:
        type: boolean
  UpdateCategoryResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Category"
  # Subcategory
  Subcategory:
    type: object
    required:
      - id
      - name
      - category
      - max_reservation_time
      - max_reservation_units
    properties:
      id:
        type: integer
      name:
        type: string
      category:
        type: integer
      max_reservation_time:
        type: integer
      max_reservation_units:
        type: integer
  ListOfSubcategories:
    type: array
    items:
      $ref: "#/definitions/Subcategory"
  SubcategoryResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Subcategory"
  NewSubcategory:
    type: object
    required:
      - name
      - max_reservation_time
      - max_reservation_units
    properties:
      name:
        type: string
      max_reservation_time:
        type: integer
      max_reservation_units:
        type: integer
  # PetSize
  PetSize:
    type: object
    required:
      - name
      - size
    properties:
      name:
        type: string
        example: "big"
      size:
        type: string
        example: "76x48x53"
      is_universal:
        type: boolean
        example: false
  ListOfPetSizes:
    type: array
    items:
      $ref: "#/definitions/PetSizeResponse"
  PetSizeResponse:
    type: object
    required:
      - id
      - name
      - size
    properties:
      id:
        type: integer
      name:
        type: string
      size:
        type: string
      is_universal:
        type: boolean

  #Active Areas
  ActiveArea:
    type: object
    required:
      - id
      - name
    properties:
      id:
        type: integer
      name:
        type: string
  ListOfActiveAreas:
    type: object
    required:
      - total
      - items
    properties:
      total:
        type: integer
      items:
        type: array
        items:
          $ref: "#/definitions/ActiveArea"

  # Equipment
  Equipment:
    type: object
    required:
      - name
      - title
      - category
      - status
      - petSize
      - compensationCost
      - technicalIssues
      - inventoryNumber
      - supplier
      - receiptDate
      - maximumDays
      - location
      - description
      - photoID
    properties:
      termsOfUse:
        type: string
        example: "https://..."
      name:
        type: string
        example: "Dog harness 3000"
        maxLength: 100
      nameSubstring:
        type: string
        example: "box"
        description: "Substring of name for case in-sensitive search"
        maxLength: 255
      title:
        type: string
        example: "клетка midwest icrate 1"
      category:
        type: integer
        example: 1
      subcategory:
        type: integer
        example: 1
      status:
        type: integer
        example: 1
      petSize:
        type: integer
        example: 1
      compensationCost:
        type: integer
        example: 3900
      technicalIssues:
        type: boolean
        example: false
        x-nullable: true
      condition:
        type: string
        example: "удовлетворительное, местами облупляется краска"
        description: "required if technicalIssues is 'есть'"
      inventoryNumber:
        type: integer
        example: "1"
      supplier:
        type: string
        example: "ИП Григорьев Виталий Васильевич"
      receiptDate:
        type: integer
        example: 1678111533
      maximumDays:
        type: integer
        example: 30
      location:
        type: integer
        example: 71
      description:
        type: string
        example: "This is a dog harness.\nWARNING: do not put on cats!"
      photoID:
        type: string
        example: ""
      petKinds:
        type: array
        items:
          type: integer

  EquipmentFilter:
    type: object
    properties:
      termsOfUse:
        type: string
        example: "https://..."
      name:
        type: string
        example: "Dog harness 3000"
      name_substring:
        type: string
        example: "box"
        description: "Substring of name for case in-sensitive search"
      title:
        type: string
        example: "клетка midwest icrate 1"
      category:
        type: integer
        example: 1
      subcategory:
        type: integer
        example: 1
      status:
        type: integer
        example: 1
      petSize:
        type: array
        items:
          type: integer
      compensationCost:
        type: integer
        example: 3900
      technicalIssues:
        type: boolean
        example: false
        x-nullable: true
      condition:
        type: string
        example: "удовлетворительное, местами облупляется краска"
      inventoryNumber:
        type: integer
        example: "1"
      supplier:
        type: string
        example: "ИП Григорьев Виталий Васильевич"
      receiptDate:
        type: integer
        example: 1678111533
      maximumDays:
        type: integer
        example: 30
      location:
        type: integer
        example: 71
      description:
        type: string
        example: "This is a dog harness.\nWARNING: do not put on cats!"
      photoID:
        type: string
      petKinds:
        type: array
        items:
          type: integer

  EquipmentResponse:
    type: object
    required:
      - id
      - termsOfUse
      - name
      - title
      - category
      - status
      - petSize
      - compensationCost
      - technicalIssues
      - inventoryNumber
      - supplier
      - receiptDate
      - maximumDays
      - location
      - description
      - photoID
      - blockingPeriods
    properties:
      id:
        type: integer
        example: 1
      termsOfUse:
        type: string
        example: "https://..."
      name:
        type: string
        example: "Dog harness 3000"
      title:
        type: string
        example: "клетка midwest icrate 1"
      category:
        type: integer
        example: 1
      subcategory:
        type: integer
        example: 1
      status:
        type: integer
        example: 1
      petSize:
        type: integer
        example: 1
      compensationCost:
        type: integer
        example: 3900
      technicalIssues:
        type: boolean
        example: false
        x-nullable: true
      condition:
        type: string
        example: "удовлетворительное, местами облупляется краска"
      inventoryNumber:
        type: integer
        example: "1"
      supplier:
        type: string
        example: "ИП Григорьев Виталий Васильевич"
      receiptDate:
        type: integer
        example: 1678111533
      maximumDays:
        type: integer
        example: 30
      location:
        type: integer
        example: 71
      description:
        type: string
        example: "This is a dog harness.\nWARNING: do not put on cats!"
      photoID:
        type: string
      petKinds:
        type: array
        items:
          $ref: "#/definitions/PetKind"
      blockingPeriods:
        type: array
        items:
          $ref: "#/definitions/EquipmentUnavailabilityPeriods"
  ListEquipment:
    type: object
    required:
      - total
      - items
    properties:
      total:
        type: integer
      items:
        type: array
        items:
          $ref: "#/definitions/EquipmentResponse"


  #PasswordReset
  PasswordReset:
    type: object
    required:
      - id
      - created_at
      - user_id
      - hash
    properties:
      id:
        type: integer
      created_at:
        type: string
      user_id:
        type: integer
      hash:
        type: string
  SendPasswordResetLinkRequest:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Login"
  PasswordResetResponse:
    type: string

  #RegistrationConfirm
  RegistrationConfirm:
    type: object
    required:
      - id
      - created_at
      - user_id
      - hash
    properties:
      id:
        type: integer
      created_at:
        type: string
      user_id:
        type: integer
      hash:
        type: string
  SendRegistrationConfirmLinkRequest:
    type: object
    required:
      - data
    properties:
      data:
        $ref: "#/definitions/Login"
  RegistrationConfirmResponse:
    type: string

  EmailConfirmResponse:
    type: string

  Login:
    type: object
    required:
      - login
    properties:
      login:
        type: string




  # Order
  OrderCreateRequest:
    type: object
    required:
      - equipment_id
      - rent_start
      - rent_end
    properties:
      description:
        type: string
      equipment_id:
        type: integer
        minimum: 1
      rent_start:
        type: string
        format: date-time
      rent_end:
        type: string
        format: date-time
  OrderUpdateRequest:
    type: object
    required:
      - description
      - quantity
      - rent_start
      - rent_end
    properties:
      description:
        type: string
      quantity:
        type: integer
        minimum: 1
      rent_start:
        type: string
        format: date-time
      rent_end:
        type: string
        format: date-time
  UserOrder:
    type: object
    required:
      - id
      - description
      - quantity
      - rent_start
      - rent_end
      - user
      - equipments
      - last_status
      - is_first
    properties:
      id:
        type: integer
      description:
        type: string
      quantity:
        type: integer
      rent_start:
        type: string
        format: date-time
      rent_end:
        type: string
        format: date-time
      user:
        type: object
        $ref: '#/definitions/UserEmbeddable'
      equipments:
        type: array
        items:
          $ref: '#/definitions/EquipmentResponse'
      last_status:
        type: object
        $ref: '#/definitions/OrderStatus'
      is_first:
        type: boolean
        example: false
  Order:
    type: object
    required:
      - id
      - description
      - quantity
      - rent_start
      - rent_end
      - user
      - equipments
      - last_status
      - is_first
    properties:
      id:
        type: integer
      description:
        type: string
      quantity:
        type: integer
      rent_start:
        type: string
        format: date-time
      rent_end:
        type: string
        format: date-time
      user:
        type: object
        $ref: '#/definitions/UserInfo'
      equipments:
        type: array
        items:
          $ref: '#/definitions/EquipmentResponse'
      last_status:
        type: object
        $ref: '#/definitions/OrderStatus'
      is_first:
        type: boolean
        example: false
  OrderStatuses:
    type: array
    items:
      $ref: '#/definitions/OrderStatus'
  OrderStatus:
    type: object
    required:
      - id
      - comment
      - status
      - created_at
      - changed_by
      - order_id
    properties:
      id:
        type: integer
      comment:
        type: string
      status:
        type: string
      created_at:
        type: string
        format: date-time
      changed_by:
        type: object
        $ref: '#/definitions/UserEmbeddable'
      order_id:
        type: integer
  UserOrdersList:
    type: object
    required:
      - total
      - items
    properties:
      total:
        type: integer
      items:
        type: array
        items:
          $ref: "#/definitions/UserOrder"
  OrdersList:
    type: object
    required:
      - total
      - items
    properties:
      total:
        type: integer
      items:
        type: array
        items:
          $ref: "#/definitions/Order"
  # Order Status
  NewOrderStatus:
    type: object
    required:
      - comment
      - status
      - created_at
      - order_id
    properties:
      comment:
        type: string
      status:
        type: string
      created_at:
        type: string
        format: date-time
      order_id:
        type: integer
  OrderStatusNames:
    type: array
    items:
      $ref: '#/definitions/OrderStatusName'
  OrderStatusName:
    type: object
    required:
      - id
      - name
    properties:
      id:
        type: integer
      name:
        type: string
